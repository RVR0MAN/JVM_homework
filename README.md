# Задача "Понимание JVM"

## Описать следующий фрагмент кода, с точки зрения работы JVM:  


![image](https://user-images.githubusercontent.com/120349770/235810571-325fea1e-65aa-4818-874f-8f7e367206f4.png)

## Решение:  

### На первом этапе происходит загрузка мета данных по классам, которые задействованы в нашем коде.
#### Загрузка осуществляется 3-х уровневой системой ClassLoaders:    

  Первый уровень (подгрузка):  
    Поиск и подгрузка классов.
    
  Второй уровень (связывание):  
    На данном этапе осуществляется проверка: валидности байт-кода, подготовка примитивов в статичных полях, связывание ссылок на другие классы.
    
  Третий уровень (инициализация):  
    Выполняется инициализация всех статических полей.
    
  
### На втором этапе выделяется память в 3-х основных областях памяти:    

   1. Metaspace  
    В данную область памяти попадает информация о классах (их имена, методы, поля).
  
   2. StackMemory  
    Область хранит в себе  информацию о том, когда и какой метод был вызван, переменные методов и ссылки на экземпляры классов.
    Из данного фрагмента кода, в области памяти StackMemory будут хранится элементы, расположенные под номером строки:
    1. (переменная примитивного типа int) 
    2,3. (ссылки "o" и "ii") 
    4. информация о вызове метода "printAll"
    5. ссылка "uselessVar"
    6. ссылка "out", которая принадлежит константе ссылочного типа в классе System, информация о методе "println" 
     
   3. Heap   
      Область выделяет оперативную память и хранит в себе экземпляры классов (конкретные объекты), 
      в виде байт-кода, ссылки на которые хранятся в StackMemory:
      2. экземпляр Object
      3. целочисленное значение - 2
      5. целочисленное значение - 700
    
      
### На третьем этапе происходит построчное выполнение кода интерпритатором, с возможностью подключением JIT компилятора (но в нашей программе он не будет задействован, т.к. он используется в случае частых вызовов одних и тех же методов (счет ведет интерпритатор))  
    
   На данном этапе также подключается GarbageCollector, который проходит по всем, доступным ему, объектам в куче, начиная от так называемых - "корневых", к которым GC всегда имеет доступ и помечает их, как "доступные", далее идёт по ссылкам и все объекты, до которых он смог добраться, также помечает, как - доступные. Остальные объекты, до которых GC не смог добраться - удаляются, а оставшиеся объекты классифицируются по "времени жизни":     
    5. целочисленное значение - 700 будет удалено, так как не используется  
   

      
    
    

